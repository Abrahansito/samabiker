<div class="min-h-screen bg-black-alpha-90 py-8 px-4 md:px-6 animation-duration-500 fadein">

    <div class="text-center mb-8 pt-6">
        <h1 class="font-display text-4xl md:text-6xl text-white italic m-0">
            CATÁLOGO <span class="text-red-600">COMPLETO</span>
        </h1>
        <p class="text-gray-400 mt-2">Explora nuestra colección de alto rendimiento</p>
    </div>

    <div class="grid">

       <div class="col-12 md:col-3 mb-4 md:mb-0">

    <div class="md:hidden w-full mb-3">
        <button pButton
                type="button"
                [label]="mobileFiltersVisible ? 'Ocultar Filtros' : 'Mostrar Filtros'"
                [icon]="mobileFiltersVisible ? 'pi pi-chevron-up' : 'pi pi-filter'"
                (click)="toggleMobileFilters()"
                class="w-full p-button-outlined p-button-secondary text-white border-gray-700">
        </button>
    </div>

    <div class="bg-gray-900 p-4 border-round-xl border-1 border-gray-800 sticky top-0 md:block"
         [class.hidden]="!mobileFiltersVisible"
         style="top: 100px;">

        <div class="mb-5">
            <h3 class="text-white text-lg font-bold mb-3">Buscar</h3>
            <div class="relative w-full">
                <i class="pi pi-search absolute z-1 text-gray-400"
                   style="top: 50%; left: 1rem; transform: translateY(-50%); font-size: 1.2rem;"></i>
                <input type="text" pInputText [(ngModel)]="searchTerm" placeholder="Ej: Casco, Aceite..."
                       class="w-full bg-gray-800 border-gray-700 text-white shadow-none"
                       style="padding-left: 3rem;" />
            </div>
        </div>

        <div class="mb-2"> <h3 class="text-white text-lg font-bold mb-3">Categorías</h3>
            <div class="flex flex-column gap-3">
                <div *ngFor="let cat of categories" class="flex align-items-center">
                    <p-checkbox [binary]="true" [(ngModel)]="cat.selected" [inputId]="cat.key"></p-checkbox>
                    <label [for]="cat.key" class="text-gray-300 ml-2 cursor-pointer hover:text-white transition-colors">{{ cat.name }}</label>
                </div>
            </div>
        </div>

        </div>
</div>
        <div class="col-12 md:col-9">

            <div class="grid">
                <div class="col-6 md:col-4 p-2" *ngFor="let product of visibleProducts">

                    <div class="product-card p-3 border-round-2xl h-full flex flex-column justify-content-between relative overflow-hidden group cursor-pointer"
                         style="background: #111; border: 1px solid rgba(255,255,255,0.05);">

                        <p-tag *ngIf="product.badge" [value]="product.badge" severity="danger" class="absolute top-0 left-0 m-2 z-2 text-xs font-bold"></p-tag>

                        <div class="relative w-full h-10rem md:h-14rem mb-3 border-round-xl overflow-hidden flex align-items-center justify-content-center z-1 p-2"
                             style="background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, rgba(0,0,0,0) 70%);">
                            <img [src]="product.image" [alt]="product.name" class="w-full h-full object-contain transition-transform duration-500 group-hover:scale-110">
                        </div>

                        <div class="z-1 px-1 flex-grow-1">
                            <span class="text-gray-500 font-bold uppercase tracking-wider block mb-1 text-xs">{{ product.category }}</span>
                            <h3 class="text-white text-sm md:text-lg font-medium m-0 line-height-3 mb-2 hover:text-red-500 transition-colors"
                                style="display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 2.8em;">
                                {{ product.name }}
                            </h3>
                        </div>

                        <div class="flex align-items-end justify-content-between mt-3 border-top-1 border-gray-800 pt-2">
                            <span class="text-lg md:text-xl font-bold text-white">S/ {{ product.price }}</span>
                            <button pButton icon="pi pi-whatsapp" (click)="openWhatsApp(product)" class="p-button-rounded p-button-outlined p-button-success hover:text-white w-2rem h-2rem md:w-3rem md:h-3rem"></button>
                        </div>
                    </div>

                </div>

                <div *ngIf="visibleProducts.length === 0" class="col-12 text-center py-8">
    <div class="inline-flex align-items-center justify-content-center w-6rem h-6rem bg-gray-900 border-circle mb-4">
        <i class="pi pi-search text-4xl text-gray-500"></i>
    </div>
    <h3 class="text-white text-xl mb-2">No encontramos lo que buscas</h3>
    <p class="text-gray-500">Intenta con otra palabra o cambia los filtros.</p>
    <button pButton label="Ver todos los productos"
            (click)="resetFilters()"
            class="p-button-text p-button-danger mt-3"></button>
</div>
            </div>

        </div>

    </div>
</div>
